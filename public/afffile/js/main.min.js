$(document).ready(function() {

    //табы для блока functions

    $('ul.tabs_list').on('click', 'li:not(.active)', function() {
        $(this)
            .addClass('active').siblings().removeClass('active')
            .closest('div.tabs_block').find('div.tabs_content').removeClass('active').eq($(this).index()).addClass('active');
    });

    //табы для блока с ценами

    $('.cost_tabs_list ul').on('click', 'li:not(.active)', function() {
        $(this)
            .addClass('active').siblings().removeClass('active')
            .closest('div.cost_block').find('div.cost_tabs_content').removeClass('active').eq($(this).index()).addClass('active');
        $('.cost_sing p:not(.active)').addClass('active').siblings().removeClass('active')
    });

    //открытие меню на бургер

    $('.menu_burger .c-menu_burger').click(function() {
       $('.menu_mobile').toggleClass('show_menu');
       $(this).toggleClass('krest');
       $('.menu_mobile .menu_lang ul').fadeOut();
       $('.menu_mobile .menu_lang_active').removeClass('open');
    });

    //закрытие меню по документу

    $(document).on('click touchstart', function(e) {
        if (!$(e.target).closest(".menu_burger").length) {
            $('.menu_mobile').removeClass('show_menu');
            $('.menu_burger .c-menu_burger').removeClass('krest');
            $('.menu_mobile .menu_lang ul').fadeOut();
            $('.menu_mobile .menu_lang_active').removeClass('open');
        }
    });

    //открытие меню для выбора языка в мобильном меню (меньше 576px)

    $('.menu_mobile .menu_lang_active').click(function() {
        $('.menu_mobile .menu_lang ul').fadeToggle();
        $(this).toggleClass('open');
    });

    //открытие меню выбора языков десктоп

    $('.lang a.lang_active').click(function() {
       $('.lang_list_block').toggleClass('show_list');
       return false;
    });

    //закрытие меню выбора языков по документу

    $(document).on('click touchstart', function(e) {
        if (!$(e.target).closest(".lang").length) {
            $('.lang_list_block').removeClass('show_list');
        }
    });

    //скролл шапки с меню

    $("#header").headroom({
        "offset": 5,
        "tolerance": 1,
        "classes": {
            "initial": "line_menu",
            "pinned": "fixed-top",
            "unpinned": "fixed-bottom"
        }
    });


    //скролл для ссылок в верхнем меню

    $('.header_menu_link').click(function(event) {
        event.preventDefault();
        var id = $(this).attr('href'),
            top = $(id).offset().top;
        $('body, html').animate({scrollTop: top}, 1500);
    });

    //скролл для ссвылок в мобильном меню

    $('.main_menu_link').click(function(event) {
        event.preventDefault();
        var id = $(this).attr('href'),
            top = $(id).offset().top;
        $('body, html').animate({scrollTop: top}, 1500);
        $('.menu_mobile').removeClass('show_menu');
        $('.c-menu_burger').removeClass('krest');
        $('.menu_lang ul').fadeOut();
        $('.menu_lang_active').removeClass('open');
    });

    $('.comp_abs_content .notification_block .notification_item').eq(0).addClass('active');

    setInterval('blockAnimate();', 3000);

    $('.phone_abs .c-phone_abs').eq(0).addClass('active');

    setInterval('blockAnimate2();', 3000);

    $('.c-monitor_abs .notification_block .notification_item').eq(0).addClass('active');

    setInterval('blockAnimate3();', 3000);

    $(document).scroll(function() {
        var scroll = $(this).scrollTop();
        var scroll_elem = $('.one_step').offset().top + 450;
        if (scroll > scroll_elem ) {
            $('.two_step_img .two_step_block_animated').addClass('animated');
        } else {
            $('.two_step_img .two_step_block_animated').removeClass('animated');
        }
    });

    $(document).scroll(function() {
        var scroll = $(this).scrollTop();
        var scroll_elem = $('.one_step').offset().top + 100;
        if (scroll > scroll_elem ) {
            $('.one_step_img .two_step_block_animated').addClass('animated');
        } else {
            $('.one_step_img .two_step_block_animated').removeClass('animated');
        }
    });

    $(document).scroll(function() {
        var scroll = $(this).scrollTop();
        var scroll_elem = $('.three_step').offset().top - 100;
        if (scroll > scroll_elem ) {
            $('.three_step_block_animated').addClass('animated');
        } else {
            $('.three_step_block_animated').removeClass('animated');
        }
    });


    $('.search_blog_form_row input').change(function() {
       if($(this).val() !== '') {
           $(this).next('label').addClass('left');
       } else {
           $(this).next('label').removeClass('left');
       }
    });

    $('.search_blog_icon').click(function() {
       $('.search_blog_form').addClass('open');
    });

    $('.close_search_blog_form').click(function() {
        $('.search_blog_form').removeClass('open');
        $('.search_blog_form_row input').val('');
        $('.search_blog_form_row label').removeClass('left');
    });

    $('.subscribe_blog_icon').click(function() {
        $('.modal_subscribe_blog').addClass('open');
    });

    $('.close_modal_subscribe_blog').click(function() {
        $('.modal_subscribe_blog').removeClass('open');
    });

    $('.blog_menu_burger .c-menu_burger').click(function() {
        $('.blog_mobile_menu').toggleClass('show_menu');
        $(this).toggleClass('krest');
        $('.blog_mobile_menu .menu_lang ul').fadeOut();
        $('.blog_mobile_menu .menu_lang_active').removeClass('open');
    });

    //закрытие меню по документу

    $(document).on('click touchstart', function(e) {
        if (!$(e.target).closest("..blog_menu_burger").length) {
            $('.blog_mobile_menu').removeClass('show_menu');
            $('.blog_menu_burger .c-menu_burger').removeClass('krest');
            $('.blog_mobile_menu .menu_lang ul').fadeOut();
            $('.blog_mobile_menu .menu_lang_active').removeClass('open');
        }
    });

    //открытие меню для выбора языка в мобильном меню (меньше 576px)

    $('.blog_mobile_menu .menu_lang_active').click(function() {
        $('.blog_mobile_menu .menu_lang ul').fadeToggle();
        $(this).toggleClass('open');
    });

});

function blockAnimate() {
    var length = $('.comp_abs_content .notification_block .notification_item').length - 1;
    $('.comp_abs_content .notification_block .notification_item').each(function(index) {
        if($(this).hasClass('active') && index != length) {
            $(this).removeClass('active').next('.notification_item').addClass('active');
            return false;
        } else if (index == length) {
            $(this).removeClass('active');
            $('.comp_abs_content .notification_block .notification_item').eq(0).addClass('active');
            return false;
        }
    });
};

function blockAnimate2() {
    var length = $('.phone_abs .c-phone_abs').length - 1;
    $('.phone_abs .c-phone_abs').each(function(index) {
        if($(this).hasClass('active') && index != length) {
            $(this).removeClass('active').next('.c-phone_abs').addClass('active');
            return false;
        } else if (index == length) {
            $(this).removeClass('active');
            $('.phone_abs .c-phone_abs').eq(0).addClass('active');
            return false;
        }
    });
};

function blockAnimate3() {
    var length = $('.tabs_content.active .c-monitor_abs .notification_block .notification_item').length - 1;
    $('.tabs_content.active .c-monitor_abs .notification_block .notification_item').each(function(index) {
        if($(this).hasClass('active') && index != length) {
            $(this).removeClass('active').next('.notification_item').addClass('active');
            return false;
        } else if (index == length) {
            $(this).removeClass('active');
            $('.tabs_content.active .c-monitor_abs .notification_block .notification_item').eq(0).addClass('active');
            return false;
        }
    });
};